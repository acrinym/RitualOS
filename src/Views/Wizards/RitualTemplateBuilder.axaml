<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:views="clr-namespace:RitualOS.Views">
    <Grid ColumnDefinitions="2*,*" RowDefinitions="Auto,*" Margin="10">
        <StackPanel Grid.Column="0" Spacing="6" IsEnabled="{Binding CanEdit}">
            <TextBlock Text="Ritual Template" FontSize="18" FontWeight="Bold"/>
            <TextBox Watermark="Name" Text="{Binding Template.Name}"/>
            <TextBox Watermark="Intention" Text="{Binding Template.Intention}" AcceptsReturn="True" Height="60"/>
            
            <TextBlock Text="Spirits" FontWeight="Bold"/>
            <ListBox ItemsSource="{Binding Spirits}" Height="80"/>
            <Button Content="Add Spirit" Command="{Binding AddSpiritCommand}"/>
            
            <TextBlock Text="Tools" FontWeight="Bold" Margin="0,10,0,0"/>
            <ListBox ItemsSource="{Binding Tools}" Height="80"/>
            <Button Content="Add Tool" Command="{Binding AddToolCommand}"/>
            
            <TextBlock Text="Chakras" FontWeight="Bold" Margin="0,10,0,0"/>
            <ListBox ItemsSource="{Binding Chakras}" Height="80"/>
            <Button Content="Add Chakra" Command="{Binding AddChakraCommand}"/>
            
            <TextBlock Text="Elements" FontWeight="Bold" Margin="0,10,0,0"/>
            <views:ElementSelector />
            
            <TextBlock Text="Steps" FontWeight="Bold" Margin="0,10,0,0"/>
            <ListBox ItemsSource="{Binding Steps}" Height="80"/>
            <Button Content="Add Step" Command="{Binding AddStepCommand}"/>
            
            <TextBox Watermark="Moon Phase" Text="{Binding Template.MoonPhase}"/>
            <TextBox Watermark="Outcome" Text="{Binding Template.OutcomeField}"/>
            <TextBox Watermark="Notes" Text="{Binding Template.Notes}" AcceptsReturn="True" Height="60"/>
            
            <StackPanel Orientation="Horizontal" Spacing="6" Margin="0,10,0,0">
                <Button Content="Prev" Command="{Binding PrevCommand}"/>
                <Button Content="Next" Command="{Binding NextCommand}"/>
                <Button Content="Save" Command="{Binding SaveCommand}"/>
                <Button Content="Load" Command="{Binding LoadCommand}"/>
            </StackPanel>
        </StackPanel>

        <ScrollViewer Grid.Column="1" Margin="10">
            <TextBox Text="{Binding Preview}" AcceptsReturn="True" IsReadOnly="True"/>
        </ScrollViewer>
    </Grid>
</UserControl>